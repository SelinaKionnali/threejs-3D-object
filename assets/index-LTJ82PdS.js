import*as i from"https://unpkg.com/three@latest/build/three.module.js";import{OrbitControls as z}from"https://unpkg.com/three/examples/jsm/controls/OrbitControls.js";import{GLTFLoader as H}from"https://unpkg.com/three/examples/jsm/loaders/GLTFLoader.js";import{DRACOLoader as b}from"https://unpkg.com/three@0.161.0/examples/jsm/loaders/DRACOLoader.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&m(u)}).observe(document,{childList:!0,subtree:!0});function S(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function m(n){if(n.ep)return;n.ep=!0;const l=S(n);fetch(n.href,l)}})();let h;const s=document.querySelector("#threejs-container"),r=new i.Scene,c=new i.PerspectiveCamera(100,s.offsetWidth/s.offsetHeight,.2,80);c.position.z=10;r.add(c);const a=new i.WebGLRenderer({alpha:!0});a.setSize(s.offsetWidth,s.offsetHeight);a.setClearColor(0,0);a.physicallyCorrectLights=!0;a.toneMapping=i.ReinhardToneMapping;a.toneMappingExposure=Math.pow(.9,5);a.shadowMap.enabled=!0;a.shadowMap.type=i.PCFSoftShadowMap;s.appendChild(a.domElement);const f=new z(c,a.domElement);f.enableDamping=!0;f.dampingFactor=.25;f.zoomToCursor=!0;f.minPolarAngle=Math.PI/4;f.maxPolarAngle=Math.PI/2.5;f.minDistance=2;f.maxDistance=10;f.update();new i.Raycaster;const y=new i.Vector2;window.addEventListener("mousemove",I,!1);function I(d){y.x=d.clientX/window.innerWidth*2-1,y.y=-(d.clientY/window.innerHeight)*2+1}const t=document.createElement("div");t.style.position="absolute";t.style.zIndex="100";t.style.top="10%";t.style.left="3%";t.style.color="white";t.style.fontFamily="Quicksand, sans-serif";t.style.fontSize="calc(0.5vw + 0.6vh + 0.5vmin)";t.style.backgroundColor="rgba(0, 0, 0, 0.8)";t.style.padding="20px";t.style.borderRadius="8px";t.style.width="20%";t.style.height="fit-content";t.style.maxHeight="80vh";t.innerHTML=`
    <h4>Instructions:</h4>
    <p>Click and drag with the left mouse button to rotate the model.</p>
    <p>Scroll the mouse wheel to zoom in and out.</p>
    <p>Click and drag with the right mouse button to pan the model.</p>
    <p>Alternatively, press 'Ctrl' (or 'Cmd' on Mac) and drag with the left mouse button to pan.</p>
`;const p=document.createElement("div");p.innerHTML="&times;";p.style.position="absolute";p.style.top="10px";p.style.right="10px";p.style.color="#ff9700";p.style.cursor="pointer";p.style.fontSize="2em";t.appendChild(p);document.body.appendChild(t);const o=document.createElement("div");o.innerHTML="Show Instructions";o.style.position="absolute";o.style.zIndex="10";o.style.top="10%";o.style.left="3%";o.style.color="white";o.style.fontFamily="Quicksand, sans-serif";o.style.fontSize="calc(0.5vw + 0.6vh + 0.5vmin)";o.style.backgroundColor="rgba(0, 0, 0, 0.8)";o.style.padding="10px";o.style.borderRadius="8px";o.style.cursor="pointer";o.style.display="none";document.body.appendChild(o);p.addEventListener("click",()=>{t.style.display="none",o.style.display="block"});o.addEventListener("click",()=>{t.style.display="block",o.style.display="none"});const g=new i.PointLight(16777215,1,100);g.position.set(10,10,10);r.add(g);const R=new i.AmbientLight(16777215,.5);r.add(R);const w=new i.PointLight(16777215,10,100);w.position.set(10,10,10);r.add(w);const L=new i.PointLight(16777215,1,100);L.position.set(1,5,10);r.add(L);const x=new i.DirectionalLight(16770764,1);x.position.set(10,1,10);r.add(x);const v=new i.DirectionalLight(16770764,1);v.position.set(0,1,0);r.add(v);const O=new i.HemisphereLight(8900331,9127187,5);r.add(O);const M=new i.SpotLight(16777215,10,100,Math.PI/4,.5,1);M.position.set(0,3,5);r.add(M);const C=new b;C.setDecoderPath("https://unpkg.com/three@0.161.0/examples/jsm/libs/draco/");const P=new H;P.setDRACOLoader(C);P.load("assets/sparkNoInterior.glb",function(d){d.scene.traverse(e=>{console.log(e),e.isMesh&&e.name==="Part_77"&&(e.material.transparent=!0,e.material.opacity=.5,e.material.transmission=.9,e.material.reflectivity=.5,e.material.refractionRatio=.98,e.material.roughness=0,e.material.metalness=0,e.castShadow=!0,e.receiveShadow=!0),e.isMesh&&e.name==="Part_41"&&(e.material.roughness=2,e.material.color.set(6043930)),e.isMesh&&e.name==="Cube.038"&&e.material.color.set(7825515),e.isMesh&&e.name==="Plane"&&(e.visible=!1),h=d.scene}),r.add(h),r.add(d.scene),E()},void 0,function(d){});function E(){f.update(),requestAnimationFrame(E),h&&(h.rotation.y+=.002),f.update(),a.render(r,c)}window.addEventListener("resize",T,!1);function T(){c.aspect=s.offsetWidth/s.offsetHeight,c.updateProjectionMatrix(),a.setSize(s.offsetWidth,s.offsetHeight)}window.addEventListener("wheel",function(d){d.deltaY<0?c.position.z-=.1:c.position.z+=.1});window.addEventListener("resize",()=>{c.aspect=s.offsetWidth/s.offsetHeight,c.updateProjectionMatrix(),a.setSize(s.offsetWidth,s.offsetHeight)});
